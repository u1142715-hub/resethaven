---
import BaseLayout from "../layouts/BaseLayout.astro";
import Section from "../components/ui/Section.astro";
import ArticleList from "../components/content/ArticleList.astro";
import ArtworkCarousel from "../components/content/ArtworkCarousel.astro";
import { getCollection } from "astro:content";

const base = import.meta.env.BASE_URL || "/";

const SAATCHI_PROFILE_URL = "https://www.saatchiart.com/en-au/solara-meridian-studio/";
const REDBUBBLE_URL = "https://www.redbubble.com/people/SamFrederiksen/shop/";
const DOWNLOAD_URL = "https://resethaven.gumroad.com//";

const articles = (await getCollection("articles"))
  .sort((a, b) => (b.data.publishedAt as Date).getTime() - (a.data.publishedAt as Date).getTime())
  .slice(0, 3);

const featuredArtworks = [
  {
    id: "origin-forms-01",
    data: {
      title: "Origin Forms I",
      slug: "origin-forms-i",
      thumbnail: `${base}images/art/origin-forms/origin-forms-01.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-First-Emergence/2900417/13413289/view",
      alt: "Abstract contemporary figurative artwork with simplified black form on warm stone-toned background, exploring emergence, balance, and visual curiosity.",
    },
  },
  {
    id: "origin-forms-02",
    data: {
      title: "Origin Forms II",
      slug: "origin-forms-ii",
      thumbnail: `${base}images/art/origin-forms/origin-forms-02.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-Second-Emergence/2900417/13415099/view",
      alt: "Abstract contemporary figurative artwork with simplified black form on warm stone-toned background, exploring emergence, balance, and visual curiosity.",
    },
  },
  {
    id: "origin-forms-03",
    data: {
      title: "Origin Forms III",
      slug: "origin-forms-iii",
      thumbnail: `${base}images/art/origin-forms/origin-forms-03.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-Third-Emergence-Origin-Collection/2900417/13415119/view",
      alt: "Abstract contemporary figurative artwork with simplified black form on warm stone-toned background, exploring emergence, balance, and visual curiosity.",
    },
  },
  {
    id: "quiet-resilience-01",
    data: {
      title: "Quiet Resilience I",
      slug: "quiet-resilience-i",
      thumbnail: `${base}images/art/origin-forms/origin-forms-04.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-Quiet-Resilience-I/2900417/13430619/view",
      alt: "Abstract contemporary figurative artwork in dark marble tones with gold veining, composed for calm presence and sustained attention.",
    },
  },
  {
    id: "quiet-resilience-02",
    data: {
      title: "Quiet Resilience II",
      slug: "quiet-resilience-ii",
      thumbnail: `${base}images/art/origin-forms/origin-forms-05.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-Quiet-Resilience-II/2900417/13430649/view",
      alt: "Abstract contemporary figurative artwork in dark marble tones with gold veining, composed for calm presence and sustained attention.",
    },
  },
  {
    id: "quiet-resilience-03",
    data: {
      title: "Quiet Resilience III",
      slug: "quiet-resilience-iii",
      thumbnail: `${base}images/art/origin-forms/origin-forms-06.jpg`,
      saatchiUrl: "https://www.saatchiart.com/en-au/art/Digital-Quiet-Resilience-III/2900417/13430661/view",
      alt: "Abstract contemporary figurative artwork in dark marble tones with gold veining, composed for calm presence and sustained attention.",
    },
  },
];
---

<BaseLayout
  title="ResetHaven"
  description="A practical life stabilisation system: small steps, clear structure, less overwhelm."
>
  <!-- HERO -->
  <section class="hero">
    <div class="container hero__inner">
      <div>
        <div class="hero__kicker">ResetHaven</div>
        <h1 class="hero__title">
          Calm your life down. Then rebuild—one small step at a time.
        </h1>
        <p class="hero__subtitle">
          A phone-friendly, low-pressure system designed for real life: tired days, messy days, and days where thinking is hard.
        </p>
        <p class="hero__subtitle">
          You don’t need motivation. You just need the next safe step—clear, small, and doable.
        </p>
        <div class="hero__actions">
          <a class="btn btn--primary btn--block-mobile" href={`${base}LifeResetPro/`}>Quick Start</a>
          <a class="btn btn--ghost btn--block-mobile" href={`${base}articles/`}>Learn More</a>
          <a class="btn btn--ghost btn--block-mobile" href={`${base}about/`}>About ResetHaven</a>
        </div>

        <div class="hero__meta">
          Purchases and fulfilment are handled securely through Gumroad.
        </div>
      </div>

      <div class="hero__media">
        <div class="hero__media-inner">
          <div class="card">
            <div class="card__eyebrow">How it works</div>
            <div class="card__title">A stabilisation-first reset</div>
            <p class="card__body">
              This is not “hustle productivity.” It’s a gentle structure that reduces overwhelm by shrinking the horizon and making the next action obvious.
            </p>
            <p class="card__body">
              Expect clear prompts, small resets, and simple loops you can return to whenever life gets heavy—without needing perfect discipline to maintain it.
            </p>
            <div class="mt-2">
              <a class="btn btn--subtle btn--block" href={`${base}LifeResetPro/`}>See the Quick Start</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY / BENEFITS -->
  <Section variant="alt">
    <div class="container">
      <div class="section__heading">
        <div class="section__eyebrow">Why this works</div>
        <h2 class="section__title">Clarity without shame. Momentum without overload.</h2>
      </div>

      <div class="grid grid--3">
        <div class="card">
          <div class="card__title">Tiny actions that actually finish</div>
          <p class="card__body">
            When everything feels urgent, the brain freezes. The system pulls you back into motion with small actions that are clearly “done” once completed.
          </p>
        </div>

        <div class="card">
          <div class="card__title">A short horizon you can hold</div>
          <p class="card__body">
            Instead of vague “someday” pressure, you work inside simple windows that reduce panic and decision-fatigue: today, tomorrow, and the next 72 hours.
          </p>
        </div>

        <div class="card">
          <div class="card__title">Stabilisers for real-world stress</div>
          <p class="card__body">
            Money, home, admin, supports, and mindset—handled as calm, contained stabilisers that lower avoidance and help you feel in control again.
          </p>
        </div>
      </div>
    </div>
  </Section>

  <!-- FEATURED WORKS -->
  <Section>
    <div class="container">
      <div class="section__heading">
        <div class="section__eyebrow">Visual atmosphere</div>
        <h2 class="section__title">A calm, curated tone—built for focus, not noise</h2>
      </div>

      <ArtworkCarousel artworks={featuredArtworks} label="Calm visual cues to support a stabilisation-first reset" />

      <div class="mt-3 text-center">
        <a class="btn btn--primary btn--block-mobile" href={`${base}LifeResetPro/`}>Start the reset</a>
        <a class="btn btn--ghost btn--block-mobile" href={DOWNLOAD_URL} target="_blank" rel="noopener noreferrer">
          Get it on Gumroad
        </a>
      </div>
    </div>
  </Section>

  <!-- ROUTING / STORES (PRIMARY + SOFT OVERFLOW) -->
  <Section variant="alt">
    <div class="container">
      <div class="cta">
        <div class="cta__eyebrow">Get started</div>
        <div class="cta__title">Begin with Quick Start, then build stability across the areas that matter.</div>
        <p class="cta__body">
          If you’re overloaded, start small. If you’re ready, continue into the full system at your own pace. Either way, the goal is the same: reduce chaos, regain clarity, and take the next safe step.
        </p>

        <div class="mt-2">
          <a class="btn btn--primary btn--block-mobile" href={`${base}LifeResetPro/`}>Go to Quick Start</a>
          <a
            class="btn btn--ghost btn--block-mobile"
            href={DOWNLOAD_URL}
            target="_blank"
            rel="noopener noreferrer"
          >
            Secure checkout on Gumroad
          </a>
        </div>

        <p class="cta__body" style="margin-top: 1rem; opacity: 0.85;">
          ResetHaven is designed to feel calm, clear, and structured—without the “perfect life” performance. It’s a practical system for days when your capacity is limited.
        </p>
      </div>
    </div>
  </Section>

  <!-- ARTICLES (SUPPORTING DISCOVERY LAYER) -->
  {articles.length > 0 && (
    <Section>
      <div class="container">
        <div class="section__heading">
          <div class="section__eyebrow">Notes & guidance</div>
          <h2 class="section__title">Short ideas that support stability and follow-through.</h2>
        </div>

        <ArticleList articles={articles} />

        <div class="mt-3 text-center">
          <a class="btn btn--ghost btn--block-mobile" href={`${base}articles/`}>View all articles</a>
        </div>
      </div>
    </Section>
  )}
</BaseLayout>
